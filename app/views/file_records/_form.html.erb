
<%= form_with(model: @file_record, local: true) do |f| %>
  <div>
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>

  <div>
    <%= f.label :file_type %>
    <%= f.select :file_type, ["genetic", "image", "analysis", "spreadsheet", "other"], {}, data: { action: "change->metadata#toggle" } %>
  </div>

  <!-- Generic metadata -->
  <fieldset>
    <legend>General Metadata</legend>
    <%= f.label :title %>
    <%= f.text_field :title %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <%= f.label :project %>
    <%= f.text_field :project %>

    <%= f.label :tags, "Tags (comma separated)" %>
    <%= f.text_field :tags %>
  </fieldset>

  <!-- Genetic metadata -->
  <fieldset data-metadata-target="genetic" hidden>
    <legend>Genetic Metadata</legend>
    <%= f.label :organism %>
    <%= f.text_field :organism %>

    <%= f.label :read_length %>
    <%= f.number_field :read_length %>
  </fieldset>

  <!-- Imaging metadata -->
  <fieldset data-metadata-target="image" hidden>
    <legend>Image Metadata</legend>
    <%= f.label :dimensions %>
    <%= f.text_field :dimensions, placeholder: "1024x768" %>

    <%= f.label :color_mode %>
    <%= f.text_field :color_mode, placeholder: "RGB, grayscale..." %>
  </fieldset>

  <!-- Spreadsheet metadata -->
  <fieldset data-metadata-target="spreadsheet" hidden>
    <legend>Spreadsheet Metadata</legend>
    <%= f.label :spreadsheet_structure %>
    <%= f.text_field :spreadsheet_structure, placeholder: "# of sheets, names..." %>
  </fieldset>

  <div>
    <%= f.submit %>
  </div>
<% end %>